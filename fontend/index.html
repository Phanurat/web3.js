<!DOCTYPE html>
<html>
<head>
    <title>PhexMT Airdrop</title>
    <script src="https://cdn.jsdelivr.net/npm/web3@1.8.0/dist/web3.min.js"></script>
</head>
<body>
    <h1>PhexMT Airdrop</h1>
    <button id="connectButton">Connect MetaMask</button>
    <button id="airdropButton" style="display:none;">Claim 1000 PhexMT</button>
    <p id="status"></p>

    <script>
        const contractAddress = 'YOUR_CONTRACT_ADDRESS'; // Replace with your contract address
        const contractABI = [
            {
                "constant": false,
                "inputs": [
                    {
                        "name": "recipient",
                        "type": "address"
                    },
                    {
                        "name": "amount",
                        "type": "uint256"
                    }
                ],
                "name": "airdrop",
                "outputs": [],
                "payable": false,
                "stateMutability": "nonpayable",
                "type": "function"
            }
        ];

        let web3;
        let contract;
        let userAccount;

        window.addEventListener('load', async () => {
            if (window.ethereum) {
                web3 = new Web3(window.ethereum);
                try {
                    await window.ethereum.request({ method: 'eth_requestAccounts' });
                    userAccount = (await web3.eth.getAccounts())[0];
                    document.getElementById('connectButton').style.display = 'none';
                    document.getElementById('airdropButton').style.display = 'inline';
                    document.getElementById('status').innerText = 'Connected to MetaMask';
                    
                    contract = new web3.eth.Contract(contractABI, contractAddress);
                } catch (error) {
                    document.getElementById('status').innerText = 'User denied account access.';
                }
            } else {
                document.getElementById('status').innerText = 'MetaMask not detected. Please install MetaMask.';
            }
        });

        document.getElementById('airdropButton').onclick = async () => {
            try {
                await contract.methods.airdrop(userAccount, web3.utils.toWei('1000', 'ether')).send({ from: userAccount });
                document.getElementById('status').innerText = 'Successfully claimed 1000 PhexMT!';
            } catch (error) {
                console.error(error);
                document.getElementById('status').innerText = 'Failed to claim PhexMT. Check console for errors.';
            }
        };
    </script>
</body>
</html>
